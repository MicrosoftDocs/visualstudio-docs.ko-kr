---
title: 성능 프로파일러의 메모리 사용량 분석
ms.custom: ''
ms.date: 04/02/2020
ms.topic: how-to
dev_langs:
- CSharp
- VB
- FSharp
- C++
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: e6e1bd3d38e6303f11ec5da0e88816d56dd43d98
ms.sourcegitcommit: ae9145b32fc8e1e663e504c315a5df5dd302fee9
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/29/2020
ms.locfileid: "92918229"
---
# <a name="analyze-memory-usage-without-debugging-in-the-performance-profiler"></a>성능 프로파일러에서 디버그하지 않고 메모리 사용량 분석

**메모리 사용량** 도구는 앱의 메모리 사용량을 모니터링합니다. 이 도구를 사용하여 Visual Studio에서 활발하게 개발 중인 시나리오의 실시간 메모리 효과를 학습할 수 있습니다. 앱의 메모리 상태에 대한 자세한 스냅샷을 만들고 스냅샷을 비교하여 메모리 문제의 근본 원인을 찾을 수 있습니다. 메모리 사용량 도구는 .NET, ASP.NET, C++ 또는 혼합 모드(.NET 및 네이티브) 앱에서 사용할 수 있습니다.

메모리 사용량 도구는 [디버거를 사용하거나 사용하지 않고](../profiling/running-profiling-tools-with-or-without-the-debugger.md) 실행할 수 있습니다. 다음 문서에서는 Visual Studio **성능 프로파일러** 에서 디버거 없이 메모리 사용량 도구를 사용하는 방법을 보여 줍니다. 이 방법은 릴리스 빌드에 권장됩니다.

## <a name="memory-usage-diagnostic-sessions"></a>메모리 사용량 진단 세션

**메모리 사용량 진단 세션을 시작하려면:**

1. Visual Studio에서 프로젝트를 엽니다.

   메모리 사용량 도구는 .NET, ASP.NET, C++ 또는 혼합 모드(.NET 및 네이티브) 앱을 지원합니다.

1. 디버그 메뉴에서 솔루션 구성을 **릴리스** 로 설정하고 **로컬 Windows 디버거** (또는 **로컬 머신** )를 배포 대상으로 선택합니다.

1. 메뉴 모음에서 **디버그** > **성능 프로파일러** 를 선택합니다.

1. **사용 가능한 도구** 에서 **메모리 사용량** 을 선택한 다음, **시작** 을 선택합니다.

   ![메모리 사용량 진단 세션 시작](../profiling/media/memuse_start_diagnosticssession.png "메모리 사용량 진단 세션 시작")

### <a name="monitor-memory-use"></a>메모리 사용 모니터링

진단 세션을 시작하면 앱이 시작되고 **진단 도구** 창에 앱의 메모리 사용에 대한 타임라인 그래프가 표시됩니다.

![메모리 사용량 개요 페이지](../profiling/media/memuse__reportoverview.png "MEMUSE__ReportOverview")

타임라인 그래프는 앱 실행 시 메모리 변동을 보여줍니다. 그래프에 스파이크는 일반적으로 일부 코드에서 데이터를 수집하거나 생성한 다음, 처리가 완료되면 삭제함을 나타냅니다. 큰 스파이크는 최적화할 수 있는 영역을 나타냅니다. 비효율적인 메모리 사용량 또는 메모리 누수를 나타낼 수 있기 때문에 더욱 걱정스러운 점은 되돌릴 수 없는 메모리 사용량이 증가하는 문제입니다.

### <a name="take-snapshots-of-app-memory-states"></a>앱 메모리 상태 스냅샷 만들기

앱은 많은 개체를 사용하며 하나의 시나리오에 분석을 집중할려고 할 수 있습니다. 또는 조사할 메모리 문제가 있을 수 있습니다. 진단 세션 중에 스냅샷을 만들어 특정 순간에 메모리 사용량을 캡처할 수 있습니다. 메모리 문제가 나타나기 전 앱의 기본 스냅샷을 만들거나, 첫 번째 문제가 발생한 이후의 다른 스냅샷을 만들거나, 시나리오를 반복할 수 있는 경우 추가 스냅샷을 만드는 것이 좋습니다.

스냅샷을 수집하려면 메모리 데이터를 캡처할 때 **스냅샷 만들기** 를 선택합니다.

### <a name="close-the-diagnostic-session"></a><a name="BKMK_Close_a_monitoring_session"></a> 진단 세션 닫기

보고서를 생성하지 않고 모니터링 세션을 중지하려면 진단 창을 닫기만 하면 됩니다. 스냅샷 수집을 완료하거나 스냅샷을 만들 때 보고서를 생성하려면 **컬렉션 중지** 를 선택합니다.

![컬렉션 중지](../profiling/media/memuse__stopcollection.png "컬렉션 중지")

## <a name="memory-usage-reports"></a>메모리 사용량 보고서

데이터 수집을 중지하면 **메모리 사용량** 도구가 앱을 중지하고 **메모리 사용량** 개요 보고서를 표시합니다.

![메모리 사용량 개요 페이지](../profiling/media/memuse__reportoverview1.png "메모리 사용량 개요 페이지")

### <a name="memory-usage-snapshots"></a><a name="BKMK_Memory_Usage_snapshot_views"></a> 메모리 사용량 스냅샷

**스냅샷** 창의 숫자는 각 스냅샷이 생성될 때 메모리의 바이트 및 개체와 스냅샷과 이전 스냅샷 간의 차이를 보여줍니다.

숫자는 새 Visual Studio 창에서 상세 **메모리 사용량** 보고서 보기를 여는 링크입니다. [스냅샷 정보 보고서](#snapshot-details-reports)에서는 한 스냅샷의 유형 및 인스턴스를 보여줍니다. [스냅샷 차이 보고서](#snapshot-difference-diff-reports)에서는 두 스냅샷의 유형 및 인스턴스를 비교합니다.

  ![스냅샷 보기 링크](../profiling/media/memuse__snapshotview_numbered.png "스냅샷 보기 링크")

|이미지|설명|
|-|-|
|![1단계](../profiling/media/procguid_1.png "ProcGuid_1")|스냅샷을 만들 때 메모리의 총 바이트 수입니다.<br /><br /> 이 링크를 선택하면 유형 인스턴스의 총 크기별로 정렬된 스냅샷 정보 보고서가 표시됩니다.|
|![2단계](../profiling/media/procguid_2.png "ProcGuid_2")|스냅샷을 만들 때 메모리의 총 개체 수입니다.<br /><br /> 이 링크를 선택하면 유형 인스턴스의 개수별로 정렬된 스냅샷 정보 보고서가 표시됩니다.|
|![3단계](../profiling/media/procguid_3.png "ProcGuid_3")|이 스냅샷의 총 메모리 개체 크기와 이전 스냅샷 간의 차이입니다. <br /><br /> 양수는 이 스냅샷의 메모리 크기가 이전 스냅샷보다 큰 것을 의미하고 음수는 크기가 더 작음을 의미합니다. **기준선** 은 진단 세션에서 스냅샷이 첫 번째임을 의미합니다. **차이 없음** 은 차이가 0임을 의미합니다.<br /><br /> 이 링크를 선택하면 유형의 인스턴스 총 크기 차이별로 정렬된 스냅샷 차이 보고서가 표시됩니다.|
|![4단계](../profiling/media/procguid_4.png "ProcGuid_4")|이 스냅샷의 총 메모리 개체 수와 이전 스냅샷 간의 차이입니다.<br /><br /> 이 링크를 선택하면 유형의 인스턴스 총 개수 차이별로 정렬된 스냅샷 차이 보고서가 표시됩니다.|

## <a name="memory-usage-snapshot-reports"></a>메모리 사용량 스냅샷 보고서

<a name="BKMK_Snapshot_report_trees"></a>**메모리 사용량** 개요 페이지에서 스냅샷 링크 중 하나를 선택하면 새 페이지에서 스냅샷 보고서가 열립니다.

![메모리 사용량 스냅샷 보고서](../profiling/media/memuse_snapshotreport_all.png "메모리 사용량 스냅샷 보고서")

스냅샷 보고서에서 **개체 유형** 항목을 확장하여 자식 항목을 표시할 수 있습니다. 인스턴스 이름은 메모리 사용량 도구에서 생성하는 고유한 ID입니다.

**개체 유형** 이 파란색이면 이 유형을 선택하여 별도의 창에서 소스 코드의 개체로 이동할 수 있습니다.

식별할 수 없는 유형이나 코드에서 사용된 방식을 이해하기 어려운 유형은 .NET, 운영 체제 또는 컴파일러 개체일 가능성이 큽니다. **메모리 사용량** 도구는 개체의 소유권 체인과 관련된 경우 이러한 개체를 표시합니다.

스냅샷 보고서에서:

- **관리되는 힙** 트리는 보고서의 유형과 인스턴스를 보여줍니다. 형식 또는 인스턴스를 선택하면 선택한 항목에 대한 **루트 경로** 및 **참조 개체** 트리가 표시됩니다.

- **루트 경로** 트리는 형식 또는 인스턴스를 참조하는 개체의 체인을 보여줍니다. .NET 가비지 수집기는 개체에 대한 모든 참조가 해제된 경우에만 개체에 대한 메모리를 정리합니다.

- **참조 형식** 또는 **참조 개체** 트리는 선택한 형식 또는 인스턴스가 참조하는 개체를 보여줍니다.

### <a name="report-tree-filters"></a><a name="BKMK_Report_tree_filters_"></a> 보고서 트리 필터

앱의 많은 형식은 앱 개발자에게 그리 흥미롭지 않습니다. 스냅샷 보고서 필터는 **관리되는 힙** 및 **루트 경로** 트리에서 이러한 유형의 대부분을 숨길 수 있습니다.

![옵션 정렬 및 필터링](../profiling/media/memuse_sortandfilter.png "MEMUSE_SortAndFilter")

- <a name="BKMK_Filter"></a> 형식 이름별로 트리를 필터링하려면 **필터** 상자에 이름을 입력합니다. 필터는 대/소문자를 구분하지 않고 형식 이름의 모든 부분에서 지정한 문자열을 인식합니다.

- <a name="BKMK_Collapse_Small_Objects"></a>**필터** 드롭다운에서 **작은 개체 축소** 를 선택하여 **크기(바이트)** 가 총 메모리의 0.5% 미만인 유형을 숨깁니다.

- <a name="BKMK_Just_My_Code"></a>**필터** 드롭다운에서 **내 코드만** 필터를 선택하면 외부 코드로 생성된 대부분의 인스턴스를 숨깁니다. 외부 유형은 운영 체제 또는 프레임워크 구성 요소에 속하거나 컴파일러에서 생성합니다.

## <a name="snapshot-details-reports"></a>스냅샷 정보 보고서

 스냅샷 정보 보고서는 진단 세션에서 스냅샷 하나를 설명합니다. 보고서를 열려면 스냅샷 창에서 크기 또는 개체 링크를 선택합니다.

 ![스냅샷 창의 스냅샷 보고서 링크](../profiling/media/memuse_snapshotview_snapshotdetailslinks.png "스냅샷 창의 스냅샷 보고서 링크")

두 링크 모두 동일한 보고서를 엽니다. **관리되는 힙** 트리의 시작 정렬 순서만 다릅니다. 크기 링크는 **포함 크기(바이트)** 열을 기준으로 보고서를 정렬합니다. 개체 링크는 **개수** 열을 기준으로 보고서를 정렬합니다. 보고서를 연 후 정렬 열이나 순서를 변경할 수 있습니다.

### <a name="managed-heap-tree-snapshot-details-reports"></a><a name="BKMK_Managed_Heap_tree__Snapshot_details_"></a> 관리되는 힙 트리(스냅샷 정보 보고서)
 **관리되는 힙** 트리에는 메모리에 보관된 개체의 형식이 나열됩니다. 유형 이름을 확장하여 가장 큰 유형의 인스턴스 10개를 크기별로 정렬해서 봅니다. 형식 또는 인스턴스를 선택하여 선택한 항목에 대한 **루트 경로** 및 **참조 개체** 트리를 표시합니다.

 ![관리되는 힙 트리](../profiling/media/memuse__snapshotdetails_managedheaptree.png "관리되는 힙 트리")

스냅샷 정보 보고서의 **관리되는 힙** 트리에는 다음 열이 있습니다.

|이름|설명|
|-|-|
|**개체 형식**|유형 이름 또는 개체 인스턴스입니다.|
|**Count**|유형의 개체 인스턴스 수입니다. 인스턴스의 경우 **개수** 는 항상 1입니다.|
|**크기(바이트)**|유형의 경우 스냅샷에 있는 모든 유형 인스턴스의 크기가 인스턴스의 포함된 개체 크기보다 작습니다.<br /><br /> 인스턴스의 경우 개체의 크기가 인스턴스에 포함된 개체의 크기보다 작습니다. |
|**포함 크기(바이트)**|포함된 개체 크기를 비롯한 유형의 인스턴스 크기 또는 단일 인스턴스 크기입니다.|
|**모듈**|개체를 포함하는 모듈입니다.|

### <a name="paths-to-root-tree-snapshot-details-reports"></a><a name="BKMK_Paths_to_Root_tree__Snapshot_details_"></a> 루트 경로 트리(스냅샷 정보 보고서)
**루트 경로 트리** 는 형식 또는 인스턴스를 참조하는 개체의 체인을 보여줍니다. .NET 가비지 수집기는 개체에 대한 모든 참조가 해제된 경우에만 개체에 대한 메모리를 정리합니다.

**루트 경로** 트리의 유형인 경우 해당 유형에 대한 참조를 보관하는 개체 수가 **참조 개수** 열에 나타납니다.

![유형에 대한 루트 트리 경로](../profiling/media/memuse_snapshotdetails_type_pathstoroottree.png "유형에 대한 루트 트리 경로")

### <a name="referenced-types-or-referenced-objects-tree-snapshot-details-reports"></a><a name="BKMK_Referenced_Objects_tree__Snapshot_details_"></a> 참조된 형식 또는 참조된 개체 트리(스냅샷 정보 보고서)
**참조 형식** 또는 **참조 개체** 트리는 선택한 형식 또는 인스턴스가 참조하는 개체를 보여줍니다.

![인스턴스에 대한 참조된 개체 트리](../profiling/media/memuse_snapshotdetails_referencedobjects_instance.png "인스턴스에 대한 참조된 개체 트리")

스냅샷 정보 보고서의 **참조 형식** 트리에는 다음 열이 있습니다. **참조 개체** 트리에는 **참조 개수** 열이 없습니다.

|이름|설명|
|-|-|
|**개체 형식** 또는 **인스턴스**|형식 또는 인스턴스의 이름입니다.|
|**참조 개수**|유형의 경우 유형의 개체 인스턴스 수입니다.|
|**크기(바이트)**|유형의 경우 유형의 모든 인스턴스 크기가 유형에 포함된 개체 크기보다 작습니다.<br /><br /> 인스턴스의 경우 개체의 크기가 개체에 포함된 개체의 크기보다 작습니다.|
|**포함 크기(바이트)**|포함된 개체의 크기를 비롯한 유형의 총 인스턴스 크기 또는 단일 인스턴스 크기입니다.|
|**모듈**|개체를 포함하는 모듈입니다.|

## <a name="snapshot-difference-diff-reports"></a>스냅샷 차이(diff) 보고서

스냅샷 차이(diff) 보고서는 기본 스냅샷과 기본 이전 스냅샷 간의 변경 사항을 보여줍니다. 차이 보고서를 열려면 스냅샷 창에서 차이 링크 중 하나를 선택합니다.

두 링크 모두 동일한 보고서를 엽니다. 보고서의 **관리되는 힙** 트리의 시작 정렬 순서만 다릅니다. 크기 링크는 **포함 크기 차이(바이트)** 열을 기준으로 보고서를 정렬합니다. 개체 링크는 **개수 차이** 열을 기준으로 보고서를 정렬합니다. 보고서를 연 후 정렬 열이나 순서를 변경할 수 있습니다.

 ![스냅샷 창의 차이 보고서 링크](../profiling/media/memuse_snapshotview_snapshotdifflinks.png "스냅샷 창의 차이 보고서 링크")

### <a name="managed-heap-tree-snapshot-diff-reports"></a><a name="BKMK_Managed_Heap_tree__Snapshot_diff_"></a> 관리되는 힙 트리(스냅샷 차이 보고서)

 **관리되는 힙** 트리에는 메모리에 보관된 개체의 형식이 나열됩니다. 유형에서 가장 큰 인스턴스 10개를 크기별로 정렬해서 볼 수 있도록 유형 이름을 확장할 수 있습니다. 형식 또는 인스턴스를 선택하여 선택한 항목에 대한 **루트 경로** 및 **참조 개체** 트리를 표시합니다.

 ![차이 보고서의 유형에 대한 관리되는 힙 트리](../profiling/media/memuse_snapshotdiff_type_heap.png "차이 보고서의 유형에 대한 관리되는 힙 트리")

스냅샷 차이 보고서의 **관리되는 힙** 트리에는 다음 열이 있습니다.

|이름|설명|
|-|-|
|**개체 형식**|유형 이름 또는 개체 인스턴스입니다.|
|**개수**|기본 스냅샷에 있는 유형의 인스턴스 수입니다. 인스턴스의 경우 **개수** 는 항상 1입니다.|
|**개수 차이**|유형의 경우 기본 스냅샷과 이전 스냅샷 간 유형의 인스턴스 수 차이입니다. 인스턴스의 경우 이 필드는 비어 있습니다.|
|**크기(바이트)**|기본 스냅샷의 개체 크기가 개체의 개체 크기보다 작습니다. 형식의 경우 **크기(바이트)** 및 **포함 크기(바이트)** 는 형식 인스턴스의 총 크기입니다.|
|**총 크기 차이(바이트)**|유형의 경우 기본 스냅샷과 이전 스냅샷 간 유형의 총 인스턴스 크기의 차이가 인스턴스의 개체 크기보다 작습니다. 인스턴스의 경우 이 필드는 비어 있습니다.|
|**포함 크기(바이트)**|개체의 개체 크기를 비롯한 기본 스냅샷의 개체 크기입니다.|
|**포함 크기 차이(바이트)**|유형의 경우 개체의 개체 크기를 비롯한 기본 스냅샷과 이전 스냅샷 간 모든 인스턴스 유형의 크기 차이입니다. 인스턴스의 경우 이 필드는 비어 있습니다.|
|**모듈**|개체를 포함하는 모듈입니다.|

### <a name="paths-to-root-tree-snapshot-diff-reports"></a><a name="BKMK_Paths_to_Root_tree__Snapshot_diff_"></a> 루트 경로 트리(스냅샷 차이 보고서)

**루트 경로 트리** 는 형식 또는 인스턴스를 참조하는 개체의 체인을 보여줍니다. .NET 가비지 수집기는 개체에 대한 모든 참조가 해제된 경우에만 개체에 대한 메모리를 정리합니다.

**루트 경로** 트리의 유형인 경우 해당 유형에 대한 참조를 보관하는 개체 수가 **참조 개수** 열에 나타납니다. 이전 스냅샷과의 개수 차이는 **참조 차이** 열에 있습니다.

 ![차이 보고서의 루트 트리 경로](../profiling/media/memuse_snapshotdiff_pathstoroot_instance_all.png "차이 보고서의 루트 트리 경로")

### <a name="referenced-types-or-referenced-objects-tree-snapshot-diff-reports"></a><a name="BKMK_Referenced_Objects_tree__Snapshot_diff_"></a> 참조 형식 또는 참조 개체 트리(스냅샷 차이 보고서)

**참조 형식** 또는 **참조 개체** 트리는 선택한 형식 또는 인스턴스가 참조하는 개체를 보여줍니다.

![차이 보고서에서 참조 형식](../profiling/media/memuse_snapshotdiff_referencedtypes.png "차이 보고서에서 참조 형식")

스냅샷 차이 보고서의 **참조 형식** 트리에는 다음 열이 있습니다. **참조 개체** 트리에는 **인스턴스** , **크기(바이트)** , **포함 크기(바이트)** 및 **모듈** 열이 있습니다.

|이름|설명|
|-|-|
|**개체 형식** 또는 **인스턴스**|유형 이름 또는 개체 인스턴스입니다.|
|**참조 개수**|기본 스냅샷에 있는 유형의 인스턴스 수입니다.|
|**참조 개수 차이**|유형의 경우 기본 스냅샷과 이전 스냅샷 간 유형의 인스턴스 수 차이입니다.|
|**크기(바이트)**|기본 스냅샷의 개체 크기가 개체의 개체 크기보다 작습니다. 형식의 경우 **크기(바이트)** 및 **포함 크기(바이트)** 는 형식 인스턴스의 총 크기입니다.|
|**총 크기 차이(바이트)**|유형의 경우 기본 스냅샷과 이전 스냅샷 간 유형의 총 인스턴스 크기의 차이가 인스턴스의 개체 크기보다 작습니다. |
|**포함 크기(바이트)**|개체의 개체 크기를 비롯한 기본 스냅샷의 개체 크기입니다.|
|**포함 크기 차이(바이트)**|유형의 경우 개체의 개체 크기를 비롯한 기본 스냅샷과 이전 스냅샷 간 모든 인스턴스 유형의 크기 차이입니다.|
|**모듈**|개체를 포함하는 모듈입니다.|

## <a name="see-also"></a>참고 항목
- [JavaScript 메모리](../profiling/javascript-memory.md)
- [Visual Studio의 프로파일링](../profiling/index.yml)
- [프로파일링 도구 살펴보기](../profiling/profiling-feature-tour.md)
- [C++, C# 및 Visual Basic을 사용하는 UWP 앱의 성능 모범 사례](/previous-versions/windows/apps/hh750313\(v\=win.10\))
- [Visual Studio에서 새 메모리 사용량 도구로 메모리 문제 진단](https://devblogs.microsoft.com/devops/diagnosing-memory-issues-with-the-new-memory-usage-tool-in-visual-studio/)